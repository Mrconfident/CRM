{"remainingRequest":"/Users/tarunlunia/Downloads/CRMFront/reimagined-fiesta/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tarunlunia/Downloads/CRMFront/reimagined-fiesta/src/components/Ticket.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tarunlunia/Downloads/CRMFront/reimagined-fiesta/src/components/Ticket.vue","mtime":1612000218402},{"path":"/Users/tarunlunia/Downloads/CRMFront/reimagined-fiesta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tarunlunia/Downloads/CRMFront/reimagined-fiesta/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tarunlunia/Downloads/CRMFront/reimagined-fiesta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tarunlunia/Downloads/CRMFront/reimagined-fiesta/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZS9hcHAnCmltcG9ydCAnZmlyZWJhc2Uvc3RvcmFnZScKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwppbXBvcnQgeyBnZXRDb29raWUgfSBmcm9tICcuLi9jb29raWVzJwppbXBvcnQgYXBpIGZyb20gJy4uL2NvbmZpZy9hcGknCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgY29tbWVudHM6ICcnLAogICAgZG9jdW1lbnRVUkw6ICcnLAogICAgc2VsZWN0ZWRGaWxlOiBudWxsLAogICAgYXBpOiAnM2FiYjY5OWVjNzk3ZjM2ZGYyOTI4ZDBiZTMwNzg1YzknLAogICAgZG9jU2F2ZWQ6IGZhbHNlCiAgfSksCiAgcHJvcHM6IHsKICAgIGxlYWQ6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9CiAgfSwKICBtZXRob2RzOiAoewogICAgY2xvc2VUaWNrZXQgKCkgewogICAgICBjb25zdCB1cmwgPSBhcGkuQkFTRV9VUkxfTE9DQUwgKyAndGlja2V0L2Nsb3NlVGlja2V0JwogICAgICBjb25zdCBoZWFkZXJzID0gewogICAgICAgIEF1dGhvcml6YXRpb246IGdldENvb2tpZSgnYWdlbnRfaWQnKQogICAgICB9CiAgICAgIGF4aW9zLnBvc3QodXJsLCB7IHNvdXJjZTogdGhpcy5sZWFkLnNvdXJjZSwgZmlyc3ROYW1lOiB0aGlzLmxlYWQuZmlyc3ROYW1lLCBsYXN0TmFtZTogdGhpcy5sZWFkLmxhc3ROYW1lLCBwb3N0SWQ6IHRoaXMubGVhZC5wb3N0SWQsIHVzZXJFbWFpbDogdGhpcy5sZWFkLnVzZXJFbWFpbCwgdGlja2V0U3RhdHVzOiAnQ2xvc2VkJywgY29tbWVudHM6IHRoaXMuY29tbWVudHMsIGRvY3VtZW50VVJMOiB0aGlzLmRvY3VtZW50VVJMLCBhZG1pbkVtYWlsOiB0aGlzLmxlYWQuYWRtaW5FbWFpbCwgdGlja2V0SWQ6IHRoaXMubGVhZC50aWNrZXRJZCB9LCB7IGhlYWRlcnM6IGhlYWRlcnMgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKCcvdGlja2V0ZGFzaGJvYXJkJykKICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgfSkKICAgIH0sCiAgICBpbWFnZUFkZGVkIChldmVudCkgewogICAgICBjb25zb2xlLmxvZygnaW5zaWRlIGltYWdlQWRkZWQnKQogICAgICB0aGlzLmltYWdlRGF0YSA9IGV2ZW50LnRhcmdldC5maWxlc1swXQogICAgfSwKICAgIFBvc3RpbmcgKCkgewogICAgICBjb25zb2xlLmxvZygnaW5zaWRlIHBvc3RpbmcnKQogICAgICAvLyAgIHRoaXMuaW1nVXJsID0gbnVsbAogICAgICB0aGlzLmRvY1NhdmVkID0gdHJ1ZQogICAgICBjb25zdCBzdG9yYWdlUmVmID0gZmlyZWJhc2UKICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgLnJlZihgJHt0aGlzLmltYWdlRGF0YS5uYW1lfWApCiAgICAgICAgLnB1dCh0aGlzLmltYWdlRGF0YSkKICAgICAgc3RvcmFnZVJlZi5vbigKICAgICAgICAnc3RhdGVfY2hhbmdlZCcsCiAgICAgICAgKHNuYXBzaG90KSA9PiB7fSwKICAgICAgICAoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpCiAgICAgICAgfSwKICAgICAgICAoKSA9PiB7CiAgICAgICAgICBzdG9yYWdlUmVmLnNuYXBzaG90LnJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oKHVybCkgPT4gewogICAgICAgICAgICAvLyB0aGlzLmltZ1VybCA9IHVybAogICAgICAgICAgICB0aGlzLnN0b3J5VVJMID0gdXJsCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdG9yeVVSTCAgPSAnLCB0aGlzLnN0b3J5VVJMKQogICAgICAgICAgICB0aGlzLmRvY3VtZW50VVJMID0gdGhpcy5zdG9yeVVSTAogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRvY3VtZW50VVJMKQogICAgICAgICAgICB0aGlzLnNhdmVVcGxvYWQoKQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICkKICAgIH0KICB9KQp9Cg=="},{"version":3,"sources":["Ticket.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Ticket.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <h2 style=\"text-align:center\">Ticket</h2>\n    <div class=\"card\">\n      <div>\n        <label for=\"\">Ticket ID:</label> <p class=\"style\"> {{ lead.ticketId }} </p>\n      </div>\n      <div class=\"leads\"><label>First Name:</label> <p class=\"style\"> {{lead.firstName}}</p>\n      <label>Last Name:</label> <p class=\"style\">{{lead.lastName}}</p></div>\n      <div class=\"leads\"><label>Lead E-mail:</label> <p class=\"style\">{{lead.userEmail}}</p>\n      <label>Source:</label> <p class=\"style\">{{lead.source}}</p></div>\n      <div class=\"leads\"><label>Status:</label> <p class=\"style\">{{lead.ticketStatus}}</p>\n      <label>Post Id:</label> <p class=\"style\">{{lead.postId}}</p></div>\n      <div class=\"leads\"><label id=comment>Comments:</label> <input type=\"text\" name=\"comments\" placeholder=\"Enter the comments\" v-model=\"comments\"></div>\n      <div class=\"leads\"><label>Support Documents:</label>\n      <input type=\"file\" accept=\"image/*\" v-on:change=\"imageAdded($event)\" id=\"uploadPic\" />\n      </div>\n      <button @click=\"Posting(), $refs.dpModal.closeModal()\">Save</button>\n      <div v-if=\"docSaved\">Document Saved</div>\n      <button class = \"full\" @click=\"closeTicket\">Close Ticket</button>\n   </div>\n  </div>\n</template>\n<script>\nimport firebase from 'firebase/app'\nimport 'firebase/storage'\nimport axios from 'axios'\nimport { getCookie } from '../cookies'\nimport api from '../config/api'\nexport default {\n  data: () => ({\n    comments: '',\n    documentURL: '',\n    selectedFile: null,\n    api: '3abb699ec797f36df2928d0be30785c9',\n    docSaved: false\n  }),\n  props: {\n    lead: {\n      type: Object\n    }\n  },\n  methods: ({\n    closeTicket () {\n      const url = api.BASE_URL_LOCAL + 'ticket/closeTicket'\n      const headers = {\n        Authorization: getCookie('agent_id')\n      }\n      axios.post(url, { source: this.lead.source, firstName: this.lead.firstName, lastName: this.lead.lastName, postId: this.lead.postId, userEmail: this.lead.userEmail, ticketStatus: 'Closed', comments: this.comments, documentURL: this.documentURL, adminEmail: this.lead.adminEmail, ticketId: this.lead.ticketId }, { headers: headers }).then((res) => {\n        console.log(res)\n        // this.$router.push('/ticketdashboard')\n        window.location.reload()\n      }).catch(e => {\n        console.log(e)\n      })\n    },\n    imageAdded (event) {\n      console.log('inside imageAdded')\n      this.imageData = event.target.files[0]\n    },\n    Posting () {\n      console.log('inside posting')\n      //   this.imgUrl = null\n      this.docSaved = true\n      const storageRef = firebase\n        .storage()\n        .ref(`${this.imageData.name}`)\n        .put(this.imageData)\n      storageRef.on(\n        'state_changed',\n        (snapshot) => {},\n        (error) => {\n          console.log(error.message)\n        },\n        () => {\n          storageRef.snapshot.ref.getDownloadURL().then((url) => {\n            // this.imgUrl = url\n            this.storyURL = url\n            console.log('storyURL  = ', this.storyURL)\n            this.documentURL = this.storyURL\n            console.log(this.documentURL)\n            this.saveUpload()\n          })\n        }\n      )\n    }\n  })\n}\n</script>\n<style scoped>\n.card {\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\n  max-width: 500px;\n  margin: auto;\n  text-align: center;\n  font-family: arial;\n  font-size: 18px;\n}\n\n.title {\n  color: grey;\n  font-size: 18px;\n}\n\n.style {\n  margin-right: 40px;\n}\n\nbutton {\n  border: none;\n  outline: 0;\n  display: inline-block;\n  padding: 8px;\n  color: white;\n  background-color: #000;\n  text-align: center;\n  cursor: pointer;\n  width: fit-content;\n  font-size: 18px;\n  margin-top: 10px;\n}\n\n.full {\n  width: 100%;\n}\n\nlabel {\n  /* display: block; */\n  padding: 5px;\n  text-decoration-line: underline;\n  font-weight: bold;\n}\n\na {\n  text-decoration: none;\n  font-size: 22px;\n  color: black;\n}\n\nbutton:hover, a:hover {\n  opacity: 0.7;\n}\n\ninput[type=file] {\n  width: 60%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  box-sizing: border-box;\n  background: #ffffff;\n  font-size: 18px;\n}\n\ninput[type=text] {\nwidth: 60%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border-bottom: 1px solid #ccc;\n  border-top: none;\n  border-left: none;\n  border-right: none;\n  box-sizing: border-box;\n  background: #ffffff;\n  margin-bottom: 2%;\n  font-size: 18px;\n}\n.leads {\n  display: flex;\n  padding: 10px;\n  justify-content: space-between;\n}\n\np {\n  display: inline;\n}\n\n</style>\n"]}]}